package ru.vafeen.domain.service

import kotlinx.coroutines.flow.SharedFlow

/**
 * Интерфейс для централизованного управления и отображения ошибок в приложении.
 * Позволяет собирать все исключения из различных слоёв (сеть, репозиторий, бизнес-логика)
 * и передавать их в UI для унифицированного отображения.
 */
interface ErrorShower {

    /**
     * Поток ошибок, доступный для подписки из UI-слоя.
     * Каждая ошибка будет доставлена в том порядке, в котором была передана.
     *
     * @return SharedFlow, эмитирующий Throwable при возникновении ошибки.
     */
    val errors: SharedFlow<Throwable>

    /**
     * Отправляет ошибку в общий поток для последующего отображения в пользовательском интерфейсе.
     * Метод suspend, так как может блокировать выполнение при переполнении буфера.
     *
     * @param throwable Исключение, которое необходимо отобразить пользователю.
     */
    suspend fun showError(throwable: Throwable)
}